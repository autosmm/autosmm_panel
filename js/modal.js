// Модуль для управления модальными окнами

class ModalManager {
    constructor() {
        this.activeModal = null;
        this.modals = {};
        this.likeStates = {};
        this.initializeLikeStates();
        this.bodyOriginalStyle = '';
        this.initializeEventListeners();
        
        // Загрузка данных модалей
        this.loadModalData();
    }
    
    // Инициализация состояний лайков
    initializeLikeStates() {
        // Проверяем, есть ли сохраненные состояния в localStorage
        const savedLikeStates = localStorage.getItem('autoSMM_likeStates');
        if (savedLikeStates) {
            this.likeStates = JSON.parse(savedLikeStates);
        }
    }
    
    // Сохранение состояний лайков
    saveLikeStates() {
        localStorage.setItem('autoSMM_likeStates', JSON.stringify(this.likeStates));
    }
    
    // Инициализация слушателей событий
    initializeEventListeners() {
        // Обработка кликов на карточки инструкций
        document.addEventListener('DOMContentLoaded', () => {
            const instructionCards = document.querySelectorAll('.instruction-card:not(.cta-card)');
            instructionCards.forEach((card, index) => {
                card.addEventListener('click', () => {
                    this.openModal(`modal-${index + 1}`);
                });
            });
            
            // Обработка кликов на кнопки "Подробнее..."
            const readMoreLinks = document.querySelectorAll('.read-more');
            readMoreLinks.forEach((link, index) => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    event.stopPropagation();
                    this.openModal(`modal-${index + 1}`);
                });
            });
            
            // Добавляем обработчик для закрытия модального окна по Escape
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && this.activeModal) {
                    this.closeModal(this.activeModal);
                }
            });
        });
    }
    
    // Загрузка данных модальных окон
    loadModalData() {
        // Данные для модальных окон (в реальном проекте могли бы загружаться с сервера)
        this.modalData = {
            'modal-1': {
                title: 'Привет, давайте познакомимся!',
                author: {
                    name: 'Владимир Дорецкий',
                    title: 'CEO: AutoSMM.ru',
                    avatar: 'images/avatar-ceo.png'
                },
                date: '15 мая 2025',
                tags: ['Новое', 'Это интересно'],
                content: {
                    type: 'text',
                    data: `
                        <div class="text-content">
                            <p>Привет! Меня зовут Владимир, и я основатель сервиса AutoSMM.ru. Хочу рассказать вам, почему мы создали этот проект и какие возможности он вам открывает.</p>
                            
                            <h3>Что такое АвтоСММ?</h3>
                            <p>АвтоСММ — это инновационный сервис, который использует искусственный интеллект для автоматизации вашего контент-маркетинга. Наша цель — избавить вас от рутинной работы по созданию и публикации контента в социальных сетях.</p>
                            
                            <div class="image-content">
                                <img src="images/ai-autosmm-concept.jpg" alt="Концепция AI АвтоСММ">
                                <div class="image-caption">Схема работы AI AвтоСММ</div>
                            </div>
                            
                            <h3>Почему сейчас всё бесплатно?</h3>
                            <p>Мы находимся в открытом бета-тестировании, и нам важно получить обратную связь от первых пользователей. Именно поэтому сейчас все функции платформы доступны бесплатно. Мы хотим, чтобы вы помогли нам сделать сервис лучше — рассказали о своём опыте использования, сообщили о возможных проблемах, поделились идеями по улучшению.</p>
                            
                            <h3>Что будет дальше?</h3>
                            <p>В ближайшем будущем мы планируем выпустить следующие обновления:</p>
                            <ul>
                                <li>Интеграцию с Instagram и YouTube</li>
                                <li>Расширенную аналитику эффективности постов</li>
                                <li>Тематические шаблоны для разных сфер бизнеса</li>
                                <li>API для разработчиков</li>
                                <li>Мобильное приложение для iOS и Android</li>
                            </ul>
                            
                            <p>Все пользователи, которые присоединились к нам во время бета-тестирования, получат особые привилегии после запуска платной версии.</p>
                            
                            <p>Мы рады видеть вас в числе первых пользователей АвтоСММ. Вместе мы сделаем ваш контент-маркетинг эффективнее!</p>
                        </div>
                    `
                },
                likes: 128,
                comments: 32
            },
            'modal-2': {
                title: 'Настройте профиль АвтоСММ и подключите свои социальные сети',
                author: {
                    name: 'Мария Соколова',
                    title: 'Менеджер по продукту',
                    avatar: 'images/avatar-user1.png'
                },
                date: '29 мая 2025',
                tags: ['Новое', 'Инструкция'],
                content: {
                    type: 'mixed',
                    data: `
                        <div class="text-content">
                            <p>Для полноценного использования всех возможностей АвтоСММ необходимо настроить профиль и подключить ваши социальные сети. В этой инструкции мы подробно расскажем, как это сделать всего за несколько минут.</p>
                            
                            <h3>Шаг 1: Настройка профиля</h3>
                            <p>Перейдите в раздел "Настройки профиля" в боковом меню. Здесь вам нужно заполнить основную информацию о себе или своей компании:</p>
                            <ul>
                                <li>Имя или название компании</li>
                                <li>Контактный email (для уведомлений)</li>
                                <li>Часовой пояс (важно для корректного планирования публикаций)</li>
                                <li>Аватар профиля</li>
                            </ul>
                            
                            <div class="image-content">
                                <img src="images/profile-settings.jpg" alt="Настройки профиля">
                                <div class="image-caption">Страница настроек профиля</div>
                            </div>
                            
                            <h3>Шаг 2: Подключение ВКонтакте</h3>
                            <p>Для подключения ВКонтакте выполните следующие действия:</p>
                            <ol>
                                <li>В меню "Мои социальные сети" выберите "ВКонтакте"</li>
                                <li>Нажмите кнопку "Подключить"</li>
                                <li>Войдите в свой аккаунт ВКонтакте и предоставьте необходимые разрешения</li>
                                <li>Выберите страницы или группы, которыми хотите управлять</li>
                            </ol>
                            
                            <h3>Шаг 3: Подключение Telegram</h3>
                            <p>Для подключения Telegram-канала:</p>
                            <ol>
                                <li>В меню "Мои социальные сети" выберите "Telegram"</li>
                                <li>Добавьте нашего бота @AutoSMM_Bot в администраторы вашего канала</li>
                                <li>Вернитесь в АвтоСММ и нажмите "Подтвердить"</li>
                                <li>Выберите канал из списка доступных</li>
                            </ol>
                            
                            <h3>Шаг 4: Подключение Яндекс Дзен</h3>
                            <p>Для подключения Яндекс Дзен:</p>
                            <ol>
                                <li>В меню "Мои социальные сети" выберите "Яндекс Дзен"</li>
                                <li>Нажмите кнопку "Подключить"</li>
                                <li>Войдите в свой аккаунт Яндекс и предоставьте необходимые разрешения</li>
                            </ol>
                            
                            <div class="video-content">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Видео-инструкция по подключению социальных сетей" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            
                            <p>После успешного подключения всех социальных сетей вы сможете управлять ими из единого интерфейса АвтоСММ. Это позволит вам настроить автоматическую публикацию контента по расписанию или использовать функцию AI автопостинга.</p>
                        </div>
                    `
                },
                likes: 86,
                comments: 15
            },
            'modal-3': {
                title: 'Создайте персональные сферы деятельности для разных блогов',
                author: {
                    name: 'Артем Иванов',
                    title: 'Контент-менеджер',
                    avatar: 'images/avatar-user2.png'
                },
                date: '3 июня 2025',
                tags: ['Новое', 'Инструкция'],
                content: {
                    type: 'text',
                    data: `
                        <div class="text-content">
                            <p>Сферы деятельности — это ключевой элемент настройки AI АвтоСММ. Они позволяют нашему искусственному интеллекту создавать контент, точно соответствующий вашей тематике. В этой инструкции мы расскажем, как правильно создать и настроить сферы деятельности.</p>
                            
                            <h3>Что такое сфера деятельности в АвтоСММ?</h3>
                            <p>Сфера деятельности — это набор параметров, которые описывают тематику вашего бизнеса или блога. На основе этих данных AI АвтоСММ генерирует контент, подбирает темы и стиль публикаций.</p>
                            
                            <div class="image-content">
                                <img src="images/sphere-concept.jpg" alt="Концепция сфер деятельности">
                                <div class="image-caption">Схема работы сфер деятельности в АвтоСММ</div>
                            </div>
                            
                            <h3>Как создать новую сферу деятельности?</h3>
                            <p>Чтобы создать новую сферу деятельности, выполните следующие шаги:</p>
                            <ol>
                                <li>В боковом меню выберите "Мои сферы деятельности"</li>
                                <li>Нажмите "Добавить сферу"</li>
                                <li>Заполните основную информацию о сфере:
                                    <ul>
                                        <li>Название сферы (например, "Блог о здоровом питании" или "Интернет-магазин электроники")</li>
                                        <li>Краткое описание (чем вы занимаетесь, что предлагаете)</li>
                                        <li>Ключевые слова и фразы, связанные с вашей деятельностью</li>
                                    </ul>
                                </li>
                                <li>Выберите тональность публикаций (формальная, дружеская, экспертная и т.д.)</li>
                                <li>Укажите целевую аудиторию (возраст, интересы, уровень экспертизы)</li>
                                <li>Сохраните сферу деятельности</li>
                            </ol>
                            
                            <h3>Рекомендации по настройке сфер деятельности</h3>
                            <p>Для достижения наилучших результатов следуйте этим рекомендациям:</p>
                            <ul>
                                <li><strong>Будьте конкретны</strong>. Чем точнее вы опишете свою сферу деятельности, тем релевантнее будет генерируемый контент.</li>
                                <li><strong>Используйте специальную терминологию</strong>. Если в вашей нише есть специфические термины, обязательно укажите их.</li>
                                <li><strong>Создавайте отдельные сферы для разных направлений</strong>. Если у вас несколько разных проектов или направлений бизнеса, создайте для каждого из них отдельную сферу деятельности.</li>
                                <li><strong>Регулярно обновляйте информацию</strong>. Если ваша деятельность меняется или расширяется, не забывайте обновлять данные в сферах деятельности.</li>
                            </ul>
                            
                            <h3>Примеры хорошо настроенных сфер деятельности</h3>
                            <p>Вот несколько примеров правильно настроенных сфер деятельности:</p>
                            <ul>
                                <li><strong>Кофейня "Арабика"</strong><br>Описание: Уютная кофейня в центре города, специализирующаяся на кофе из редких сортов зерен и авторских десертах.<br>Ключевые слова: кофе, эспрессо, капучино, десерты, бариста, кофейные зерна, арабика, робуста</li>
                                <li><strong>Фитнес-тренер</strong><br>Описание: Персональный тренер по функциональному тренингу и силовым тренировкам с 8-летним опытом работы.<br>Ключевые слова: фитнес, тренировки, здоровье, силовые упражнения, функциональный тренинг, ЗОЖ, похудение, набор мышечной массы</li>
                            </ul>
                            
                            <p>Правильно настроенные сферы деятельности — это фундамент эффективной работы AI АвтоСММ. Потратьте время на их тщательную настройку, и вы получите качественный контент, который будет точно соответствовать вашей тематике и интересам вашей аудитории.</p>
                        </div>
                    `
                },
                likes: 124,
                comments: 37
            },
            'modal-4': {
                title: 'Настройте источники и параметры Ai автопостинга для соц.сетей',
                author: {
                    name: 'Екатерина Петрова',
                    title: 'Руководитель отдела разработки',
                    avatar: 'images/avatar-user3.png'
                },
                date: '7 июня 2025',
                tags: ['Новое', 'Инструкция'],
                content: {
                    type: 'mixed',
                    data: `
                        <div class="text-content">
                            <p>Одна из самых мощных функций АвтоСММ — это автоматический сбор контента из различных источников для последующей генерации постов с помощью искусственного интеллекта. В этой инструкции мы расскажем, как настроить источники контента и параметры автопостинга.</p>
                            
                            <h3>Шаг 1: Выбор источников контента</h3>
                            <p>В АвтоСММ вы можете использовать несколько типов источников контента:</p>
                            <ul>
                                <li><strong>RSS-ленты</strong> — новостные сайты, блоги, тематические порталы</li>
                                <li><strong>Telegram-каналы</strong> — любые публичные каналы, связанные с вашей тематикой</li>
                                <li><strong>Социальные сети</strong> — публичные группы и страницы во ВКонтакте, Яндекс Дзен</li>
                                <li><strong>Собственная база знаний</strong> — ваши материалы, загруженные в систему</li>
                            </ul>
                            
                            <div class="image-content">
                                <img src="images/content-sources.jpg" alt="Источники контента">
                                <div class="image-caption">Страница настройки источников контента</div>
                            </div>
                            
                            <h3>Шаг 2: Добавление RSS-лент</h3>
                            <p>Для добавления RSS-ленты выполните следующие действия:</p>
                            <ol>
                                <li>В боковом меню выберите "Источники контента"</li>
                                <li>Нажмите "Добавить источник" и выберите "RSS-лента"</li>
                                <li>Вставьте URL RSS-ленты (например, https://site.ru/rss)</li>
                                <li>Укажите название источника для удобной идентификации</li>
                                <li>Выберите сферу деятельности, к которой относится этот источник</li>
                                <li>Настройте фильтры для отбора контента (по ключевым словам, дате и т.д.)</li>
                                <li>Сохраните источник</li>
                            </ol>
                            
                            <div class="video-content">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Настройка RSS-источников в АвтоСММ" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            
                            <h3>Шаг 3: Подключение Telegram-каналов</h3>
                            <p>Для подключения Telegram-канала как источника контента:</p>
                            <ol>
                                <li>В разделе "Источники контента" нажмите "Добавить источник" и выберите "Telegram"</li>
                                <li>Укажите username канала (например, @channel_name)</li>
                                <li>Выберите сферу деятельности</li>
                                <li>Настройте фильтры для отбора контента</li>
                                <li>Сохраните источник</li>
                            </ol>
                            
                            <h3>Шаг 4: Настройка параметров автопостинга</h3>
                            <p>После добавления источников контента необходимо настроить параметры автопостинга:</p>
                            <ol>
                                <li>Перейдите в раздел "100% Ai автопостинг"</li>
                                <li>Выберите социальные сети для автоматической публикации</li>
                                <li>Настройте расписание публикаций (дни недели и время)</li>
                                <li>Установите частоту публикаций (например, 2 поста в день)</li>
                                <li>Выберите типы контента (текст, изображения, видео)</li>
                                <li>Настройте дополнительные параметры:
                                    <ul>
                                        <li>Стиль генерации текста (информационный, развлекательный, продающий)</li>
                                        <li>Длина постов (короткие, средние, длинные)</li>
                                        <li>Использование хештегов</li>
                                        <li>Добавление эмодзи</li>
                                        <li>Включение призывов к действию</li>
                                    </ul>
                                </li>
                                <li>Сохраните настройки и активируйте автопостинг</li>
                            </ol>
                            
                            <h3>Рекомендации по настройке</h3>
                            <p>Для достижения наилучших результатов рекомендуем:</p>
                            <ul>
                                <li>Выбирать качественные и авторитетные источники контента</li>
                                <li>Использовать не менее 5-7 источников для каждой сферы деятельности</li>
                                <li>Устанавливать четкие фильтры для отбора релевантного контента</li>
                                <li>Начинать с небольшой частоты публикаций (1-2 поста в день)</li>
                                <li>Регулярно проверять качество генерируемого контента и корректировать настройки при необходимости</li>
                            </ul>
                            
                            <p>Правильно настроенные источники контента и параметры автопостинга обеспечат бесперебойную работу AI АвтоСММ и позволят вам полностью автоматизировать ведение социальных сетей.</p>
                        </div>
                    `
                },
                likes: 92,
                comments: 24
            },
            'modal-5': {
                title: 'Как работает 100% Ai автопостинг для соц.сетей (ВК, ТГ, Дзен)',
                author: {
                    name: 'Андрей Смирнов',
                    title: 'Технический директор',
                    avatar: 'images/avatar-user6.png'
                },
                date: '10 июня 2025',
                tags: ['Новое', '100% АвтоСММ'],
                content: {
                    type: 'mixed',
                    data: `
                        <div class="text-content">
                            <p>100% AI автопостинг — это революционная технология, которая позволяет полностью автоматизировать создание и публикацию контента в социальных сетях. В этой статье мы раскроем, как работает эта технология и какие преимущества она дает.</p>
                            
                            <div class="video-content">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Демонстрация работы AI автопостинга" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            
                            <h3>Принцип работы AI автопостинга</h3>
                            <p>AI автопостинг работает по следующему алгоритму:</p>
                            <ol>
                                <li><strong>Сбор информации</strong>. Система автоматически собирает контент из настроенных вами источников (RSS, Telegram, социальные сети).</li>
                                <li><strong>Анализ и отбор</strong>. Искусственный интеллект анализирует собранный контент, отбирает наиболее релевантные материалы в соответствии с вашими сферами деятельности.</li>
                                <li><strong>Генерация контента</strong>. На основе отобранной информации AI создает оригинальные посты, адаптированные под специфику каждой социальной сети.</li>
                                <li><strong>Подбор медиа</strong>. Система подбирает или генерирует подходящие изображения, инфографику или видео для сопровождения текста.</li>
                                <li><strong>Планирование</strong>. Контент распределяется по расписанию с учетом оптимального времени публикации для каждой платформы.</li>
                                <li><strong>Публикация</strong>. Посты автоматически публикуются в выбранных социальных сетях в заданное время.</li>
                                <li><strong>Аналитика</strong>. Система собирает данные о результативности публикаций и корректирует стратегию для повышения эффективности.</li>
                            </ol>
                            
                            <div class="image-content">
                                <img src="images/ai-autoposting-scheme.jpg" alt="Схема работы AI автопостинга">
                                <div class="image-caption">Схема работы 100% AI автопостинга</div>
                            </div>
                            
                            <h3>Технологии, используемые в AI автопостинге</h3>
                            <p>В основе нашей системы лежат передовые технологии искусственного интеллекта:</p>
                            <ul>
                                <li><strong>Natural Language Processing (NLP)</strong> — для анализа и генерации текстов</li>
                                <li><strong>Machine Learning</strong> — для обучения системы на основе обратной связи</li>
                                <li><strong>Computer Vision</strong> — для работы с изображениями и видео</li>
                                <li><strong>Predictive Analytics</strong> — для определения оптимального времени публикаций</li>
                            </ul>
                            
                            <h3>Преимущества 100% AI автопостинга</h3>
                            <p>Использование нашей технологии автопостинга дает множество преимуществ:</p>
                            <ul>
                                <li><strong>Экономия времени</strong>. Вместо нескольких часов ежедневно на создание и публикацию контента, вы тратите всего 15-20 минут в неделю на проверку и корректировку стратегии.</li>
                                <li><strong>Стабильность</strong>. Посты выходят по расписанию, без перерывов на выходные, праздники или отпуск.</li>
                                <li><strong>Качество контента</strong>. Искусственный интеллект создает грамматически правильные, информативные и engaging посты.</li>
                                <li><strong>Персонализация</strong>. Контент адаптируется под особенности каждой платформы и целевой аудитории.</li>
                                <li><strong>Масштабируемость</strong>. Система может одновременно обслуживать множество аккаунтов в разных социальных сетях.</li>
                                <li><strong>Аналитика</strong>. Вы получаете подробную статистику эффективности каждого поста.</li>
                            </ul>
                            
                            <h3>Примеры использования</h3>
                            <p>Вот несколько примеров успешного применения AI автопостинга:</p>
                            <ul>
                                <li><strong>Интернет-магазин спортивных товаров</strong>. Увеличение вовлеченности на 78% и рост органического трафика на 42% за 3 месяца.</li>
                                <li><strong>Туристическое агентство</strong>. Увеличение конверсии из социальных сетей на 56% и сокращение затрат на SMM на 70%.</li>
                                <li><strong>Образовательный проект</strong>. Рост аудитории в социальных сетях на 124% за 6 месяцев.</li>
                            </ul>
                            
                            <p>100% AI автопостинг от АвтоСММ — это не просто инструмент автоматизации, это полноценная замена SMM-менеджера, контент-маркетолога и копирайтера. Попробуйте эту технологию прямо сейчас и оцените, насколько она может упростить и улучшить ваш контент-маркетинг.</p>
                        </div>
                    `
                },
                likes: 216,
                comments: 53
            },
            'modal-6': {
                title: 'Как генерировать контент планы в 1 клик',
                author: {
                    name: 'Ольга Кузнецова',
                    title: 'Контент-стратег',
                    avatar: 'images/avatar-user5.png'
                },
                date: '14 июня 2025',
                tags: ['Новое', 'Вайб СММ'],
                content: {
                    type: 'text',
                    data: `
                        <div class="text-content">
                            <p>Создание контент-планов — одна из самых трудоемких задач в SMM. С помощью АвтоСММ вы можете генерировать профессиональные контент-планы всего за один клик. В этой статье мы расскажем, как использовать эту функцию.</p>
                            
                            <h3>Что такое контент-план в АвтоСММ?</h3>
                            <p>Контент-план — это структурированный график публикаций с детальным описанием тем, форматов и целей каждого поста. В АвтоСММ контент-планы создаются с помощью искусственного интеллекта на основе:</p>
                            <ul>
                                <li>Информации о вашей сфере деятельности</li>
                                <li>Анализа успешных публикаций в вашей нише</li>
                                <li>Актуальных трендов и сезонных событий</li>
                                <li>Маркетинговых целей (повышение вовлеченности, увеличение продаж и т.д.)</li>
                            </ul>
                            
                            <div class="image-content">
                                <img src="images/content-plan-example.jpg" alt="Пример контент-плана">
                                <div class="image-caption">Пример сгенерированного контент-плана на неделю</div>
                            </div>
                            
                            <h3>Как создать контент-план в 1 клик</h3>
                            <p>Для создания контент-плана выполните следующие шаги:</p>
                            <ol>
                                <li>В боковом меню выберите "Создать контент-план"</li>
                                <li>Выберите сферу деятельности, для которой нужен контент-план</li>
                                <li>Укажите период планирования (неделя, две недели, месяц)</li>
                                <li>Выберите социальные сети, для которых создается план</li>
                                <li>Установите частоту публикаций для каждой сети</li>
                                <li>Выберите основные цели (информирование, вовлечение, продажи и т.д.)</li>
                                <li>Нажмите кнопку "Создать контент-план"</li>
                            </ol>
                            
                            <p>Система автоматически сгенерирует контент-план с учетом всех указанных параметров. План будет включать:</p>
                            <ul>
                                <li>Темы для каждого поста</li>
                                <li>Типы контента (текст, изображение, видео, опрос и т.д.)</li>
                                <li>Оптимальное время публикации</li>
                                <li>Рекомендуемые хештеги</li>
                                <li>Примеры заголовков и основных тезисов</li>
                            </ul>
                            
                            <h3>Как редактировать и адаптировать контент-план</h3>
                            <p>После генерации контент-плана вы можете:</p>
                            <ul>
                                <li><strong>Редактировать темы</strong>. Изменяйте предложенные темы или добавляйте свои.</li>
                                <li><strong>Перемещать публикации</strong>. Меняйте даты и время публикаций методом drag-and-drop.</li>
                                <li><strong>Добавлять комментарии</strong>. Оставляйте заметки и указания для каждого поста.</li>
                                <li><strong>Удалять или добавлять посты</strong>. Корректируйте количество публикаций в плане.</li>
                                <li><strong>Экспортировать</strong>. Сохраняйте план в форматах PDF, Excel или Google Sheets.</li>
                                <li><strong>Делиться с командой</strong>. Предоставляйте доступ коллегам или клиентам.</li>
                            </ul>
                            
                            <h3>Бонус: Шаблоны контент-планов</h3>
                            <p>В АвтоСММ есть библиотека готовых шаблонов контент-планов для различных сфер бизнеса:</p>
                            <ul>
                                <li>Электронная коммерция</li>
                                <li>Услуги красоты</li>
                                <li>Фитнес и здоровье</li>
                                <li>Образование</li>
                                <li>Путешествия</li>
                                <li>Ресторанный бизнес</li>
                                <li>И многие другие</li>
                            </ul>
                            
                            <p>Эти шаблоны можно использовать как основу для создания вашего персонализированного контент-плана.</p>
                            
                            <h3>Реальные результаты</h3>
                            <p>Наши пользователи отмечают следующие преимущества после внедрения автоматически сгенерированных контент-планов:</p>
                            <ul>
                                <li>Экономия 5-10 часов рабочего времени еженедельно</li>
                                <li>Повышение вовлеченности аудитории на 30-50%</li>
                                <li>Более стабильный рост подписчиков</li>
                                <li>Улучшение конверсии из социальных сетей</li>
                                <li>Более согласованная и целостная контент-стратегия</li>
                            </ul>
                            
                            <p>Создание контент-планов с помощью искусственного интеллекта — это простой способ вывести ваш SMM на новый уровень. Попробуйте эту функцию прямо сейчас и оцените, насколько она может упростить вашу работу с социальными сетями.</p>
                        </div>
                    `
                },
                likes: 178,
                comments: 42
            },
            'modal-7': {
                title: 'Как создавать посты за 1 клик с AI АвтоСММ',
                author: {
                    name: 'Дмитрий Лебедев',
                    title: 'SMM-специалист',
                    avatar: 'images/avatar-user4.png'
                },
                date: '18 июня 2025',
                tags: ['Новое', 'Вайб СММ'],
                content: {
                    type: 'mixed',
                    data: `
                        <div class="text-content">
                            <p>Создание качественного поста обычно требует множества шагов: придумать тему, написать текст, подобрать изображение, добавить хештеги... С АвтоСММ вы можете сделать все это в один клик. В этой инструкции мы расскажем, как создавать профессиональные посты за считанные секунды.</p>
                            
                            <h3>Функция "Создать пост за 1 клик"</h3>
                            <p>Функция "Создать пост за 1 клик" использует искусственный интеллект для автоматического создания полноценных постов для социальных сетей. Вам достаточно указать минимальную информацию, и система сгенерирует готовый к публикации пост.</p>
                            
                            <div class="image-content">
                                <img src="images/one-click-post.jpg" alt="Интерфейс создания поста за 1 клик">
                                <div class="image-caption">Интерфейс функции "Создать пост за 1 клик"</div>
                            </div>
                            
                            <h3>Как создать пост за 1 клик</h3>
                            <p>Для создания поста выполните следующие шаги:</p>
                            <ol>
                                <li>В боковом меню выберите "Создать пост за 1 клик"</li>
                                <li>Выберите сферу деятельности</li>
                                <li>Выберите тип поста:
                                    <ul>
                                        <li>Информационный</li>
                                        <li>Развлекательный</li>
                                        <li>Продающий</li>
                                        <li>Вовлекающий</li>
                                        <li>Экспертный</li>
                                    </ul>
                                </li>
                                <li>Укажите основную тему или оставьте поле пустым, чтобы система предложила тему автоматически</li>
                                <li>Выберите социальную сеть, для которой создается пост</li>
                                <li>Нажмите кнопку "Создать пост"</li>
                            </ol>
                            
                            <p>Через несколько секунд система предложит вам готовый пост, который включает:</p>
                            <ul>
                                <li>Текст, адаптированный под выбранную социальную сеть</li>
                                <li>Подходящее изображение (из нашей библиотеки или сгенерированное AI)</li>
                                <li>Хештеги</li>
                                <li>Эмодзи</li>
                                <li>Призыв к действию</li>
                            </ul>
                            
                            <div class="video-content">
                                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Демонстрация создания поста за 1 клик" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            
                            <h3>Редактирование сгенерированного поста</h3>
                            <p>После генерации поста вы можете:</p>
                            <ul>
                                <li><strong>Редактировать текст</strong>. Вносите любые изменения в сгенерированный текст.</li>
                                <li><strong>Изменить изображение</strong>. Выберите другое изображение из предложенных вариантов или загрузите свое.</li>
                                <li><strong>Настроить хештеги</strong>. Добавляйте или удаляйте хештеги.</li>
                                <li><strong>Добавить опрос или кнопки</strong>. Расширьте функциональность поста интерактивными элементами.</li>
                                <li><strong>Предварительный просмотр</strong>. Оцените, как пост будет выглядеть в выбранной социальной сети.</li>
                            </ul>
                            
                            <h3>Публикация и планирование</h3>
                            <p>После создания поста у вас есть несколько вариантов действий:</p>
                            <ul>
                                <li><strong>Опубликовать сейчас</strong>. Мгновенная публикация в выбранной социальной сети.</li>
                                <li><strong>Запланировать</strong>. Выберите дату и время для отложенной публикации.</li>
                                <li><strong>Сохранить в черновики</strong>. Сохраните пост для дальнейшего редактирования.</li>
                                <li><strong>Скопировать</strong>. Скопируйте текст и ссылку на изображение для использования в других сервисах.</li>
                                <li><strong>Поделиться с командой</strong>. Отправьте пост на утверждение коллегам или клиентам.</li>
                            </ul>
                            
                            <h3>Советы по эффективному использованию</h3>
                            <p>Чтобы получать максимально качественные посты, следуйте этим рекомендациям:</p>
                            <ul>
                                <li>Детально заполните информацию о сфере деятельности</li>
                                <li>Начните с информационных постов, затем переходите к продающим</li>
                                <li>Используйте функцию редактирования для добавления персонального стиля</li>
                                <li>Регулярно обновляйте настройки сферы деятельности, добавляя актуальные темы и ключевые слова</li>
                                <li>Анализируйте статистику публикаций и корректируйте стратегию</li>
                            </ul>
                            
                            <p>Функция "Создать пост за 1 клик" поможет вам поддерживать активность в социальных сетях без значительных временных затрат. Это идеальное решение для предпринимателей, маркетологов и контент-менеджеров, которым нужен качественный контент без лишних усилий.</p>
                        </div>
                    `
                },
                likes: 154,
                comments: 38
            }
        };
    }
    
    // Создание HTML-структуры модального окна
    createModalHTML(modalId) {
        if (!this.modalData[modalId]) {
            console.error(`Данные для модального окна ${modalId} не найдены.`);
            return null;
        }
        
        const data = this.modalData[modalId];
        
        // Создаем элемент модального окна
        const modalOverlay = document.createElement('div');
        modalOverlay.className = 'modal-overlay';
        modalOverlay.id = modalId + '-overlay';
        
        const isLiked = this.likeStates[modalId] || false;
        const likeClass = isLiked ? 'active' : '';
        
        modalOverlay.innerHTML = `
            <div class="modal-container">
                <button class="modal-close">&times;</button>
                
                <div class="modal-header">
                    <h2 class="modal-title">${data.title}</h2>
                </div>
                
                <div class="modal-body">
                    <div class="author-block">
                        <img src="${data.author.avatar}" alt="${data.author.name}" class="author-avatar">
                        <div class="author-info">
                            <div class="author-name">${data.author.name}</div>
                            <div class="author-title">${data.author.title}</div>
                            <div class="publish-date">${data.date}</div>
                        </div>
                    </div>
                    
                    <div class="modal-tags">
                        ${data.tags.map(tag => `<span class="modal-tag">${tag}</span>`).join('')}
                    </div>
                    
                    ${data.content.data}
                    
                    <div class="bonus-block">
                        <svg class="bonus-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.6-6.3 4.6 2.3-7-6-4.6h7.6z"/>
                        </svg>
                        <div class="bonus-content">
                            <div class="bonus-title">Бонус для активных комментаторов!</div>
                            <div class="bonus-text">Оставляйте комментарии к нашим материалам и получайте подарки! Каждый месяц мы разыгрываем премиум-подписки и эксклюзивный доступ к новым функциям среди самых активных участников.</div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <div class="engagement-block">
                        <button class="like-button ${likeClass}" data-modal="${modalId}">
                            <svg class="like-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                            <span class="like-count">${data.likes}</span>
                        </button>
                        
                        <button class="comment-button">
                            <svg class="comment-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                            </svg>
                            <span class="comment-count">${data.comments}</span>
                        </button>
                    </div>
                    
                    <a href="#" class="full-article-link">
                        Перейти к полной статье
                        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </a>
                </div>
                
                <!-- Секция комментариев -->
                <div class="comments-section">
                    <div class="comments-header">
                        <div class="comments-title-block">
                            <h3 class="comments-title">
                                <svg class="comments-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                                </svg>
                                Комментарии
                            </h3>
                            <div class="comments-count-badge">${data.comments}</div>
                        </div>
                        
                        <div class="comments-benefits">
                            <div class="benefits-trigger">
                                <svg class="gift-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 12 20 22 4 22 4 12"></polyline>
                                    <rect x="2" y="7" width="20" height="5"></rect>
                                    <line x1="12" y1="22" x2="12" y2="7"></line>
                                    <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                                    <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                                </svg>
                                <span>Получайте подарки за комментарии!</span>
                                <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </div>
                            
                            <div class="benefits-dropdown">
                                <div class="benefit-item">
                                    <div class="benefit-icon">🎁</div>
                                    <div class="benefit-text">
                                        <div class="benefit-title">Еженедельные розыгрыши</div>
                                        <div class="benefit-description">Премиум-подписки на AutoSMM.ru для самых активных комментаторов</div>
                                    </div>
                                </div>
                                <div class="benefit-item">
                                    <div class="benefit-icon">⭐</div>
                                    <div class="benefit-text">
                                        <div class="benefit-title">Эксклюзивный доступ</div>
                                        <div class="benefit-description">Ранний доступ к новым функциям и обновлениям платформы</div>
                                    </div>
                                </div>
                                <div class="benefit-item">
                                    <div class="benefit-icon">👑</div>
                                    <div class="benefit-text">
                                        <div class="benefit-title">VIP-статус</div>
                                        <div class="benefit-description">Персональная поддержка и консультации от экспертов AutoSMM</div>
                                    </div>
                                </div>
                                <div class="benefit-item">
                                    <div class="benefit-icon">💎</div>
                                    <div class="benefit-text">
                                        <div class="benefit-title">Специальные бонусы</div>
                                        <div class="benefit-description">Дополнительные возможности AI-генерации и автопостинга</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="vk-auth-prompt">
                        <div class="auth-prompt-content">
                            <div class="auth-prompt-icon">
                                <svg viewBox="0 0 24 24" fill="none">
                                    <rect width="24" height="24" rx="6" fill="#4C75A3"/>
                                    <path d="M12.6 17.4C15.7 17.2 18 14.6 18 11.4C18 7.8 15.2 6 12 6C8.8 6 6 7.8 6 11.4C6 14.6 8.3 17.2 11.4 17.4V13.6H10V12H11.4V10.8C11.4 9.4 12.2 8.8 13.4 8.8C13.8 8.8 14.2 8.8 14.2 8.8V10.2H13.6C13 10.2 12.8 10.6 12.8 10.8V12H14L13.8 13.6H12.6V17.4Z" fill="white"/>
                                </svg>
                            </div>
                            <div class="auth-prompt-text">
                                <div class="auth-prompt-title">Присоединяйтесь к обсуждению!</div>
                                <div class="auth-prompt-subtitle">Войдите через ВКонтакте, чтобы оставить комментарий и участвовать в розыгрышах</div>
                            </div>
                            <button class="vk-login-btn" onclick="modalManager.showVKAuthForComments('${modalId}')">
                                <svg viewBox="0 0 24 24" fill="none">
                                    <rect width="24" height="24" rx="6" fill="white"/>
                                    <path d="M12.6 17.4C15.7 17.2 18 14.6 18 11.4C18 7.8 15.2 6 12 6C8.8 6 6 7.8 6 11.4C6 14.6 8.3 17.2 11.4 17.4V13.6H10V12H11.4V10.8C11.4 9.4 12.2 8.8 13.4 8.8C13.8 8.8 14.2 8.8 14.2 8.8V10.2H13.6C13 10.2 12.8 10.6 12.8 10.8V12H14L13.8 13.6H12.6V17.4Z" fill="#4C75A3"/>
                                </svg>
                                Войти через ВКонтакте
                            </button>
                        </div>
                    </div>
                    
                    <div class="vk-comments-widget" id="vk_comments_${modalId}" style="display: none;">
                        <div class="comments-widget-header">
                            <div class="widget-title">Комментарии пользователей ВКонтакте</div>
                            <div class="widget-description">Ваши комментарии автоматически появятся у вас на странице ВКонтакте</div>
                        </div>
                        <div class="comments-widget-container">
                            <!-- Здесь будет виджет ВКонтакте -->
                            <div class="vk-widget-placeholder">
                                <div class="loading-spinner"></div>
                                <div class="loading-text">Загрузка комментариев...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comments-engagement-footer">
                        <div class="engagement-stats">
                            <div class="stat-item">
                                <span class="stat-number">2,547</span>
                                <span class="stat-label">участников</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-number">156</span>
                                <span class="stat-label">призов выдано</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-item">
                                <span class="stat-number">₽50,000</span>
                                <span class="stat-label">общая сумма призов</span>
                            </div>
                        </div>
                        <div class="next-drawing">
                            <svg class="calendar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            <span>Следующий розыгрыш: <strong>каждое воскресенье в 18:00</strong></span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        return modalOverlay;
    }
    
    // Открытие модального окна
    openModal(modalId) {
        // Проверяем, существует ли уже элемент модального окна
        let modalElement = document.getElementById(modalId + '-overlay');
        
        // Если элемент не существует, создаем его
        if (!modalElement) {
            modalElement = this.createModalHTML(modalId);
            if (!modalElement) return;
            
            document.body.appendChild(modalElement);
            
            // Добавляем обработчики событий
            this.setupModalEventListeners(modalElement, modalId);
        }
        
        // Блокируем прокрутку основного содержимого
        this.bodyOriginalStyle = document.body.style.overflow;
        document.body.style.overflow = 'hidden';
        
        // Отображаем модальное окно с анимацией
        setTimeout(() => {
            modalElement.classList.add('active');
        }, 10);
        
        this.activeModal = modalId;
        
        // Для отслеживания аналитики
        console.log(`Открыто модальное окно: ${modalId}`);
    }
    
    // Настройка обработчиков событий для модального окна
    setupModalEventListeners(modalElement, modalId) {
        // Обработчик для закрытия по крестику
        const closeButton = modalElement.querySelector('.modal-close');
        if (closeButton) {
            closeButton.addEventListener('click', () => {
                this.closeModal(modalId);
            });
        }
        
        // Обработчик для закрытия по клику на оверлей (вне контейнера)
        modalElement.addEventListener('click', (event) => {
            if (event.target === modalElement) {
                this.closeModal(modalId);
            }
        });
        
        // Обработчик для кнопки лайка
        const likeButton = modalElement.querySelector('.like-button');
        if (likeButton) {
            likeButton.addEventListener('click', () => {
                this.toggleLike(modalId, likeButton);
            });
        }
        
        // Обработчик для кнопки комментария
        const commentButton = modalElement.querySelector('.comment-button');
        if (commentButton) {
            commentButton.addEventListener('click', () => {
                this.scrollToComments(modalId);
            });
        }
        
        // Обработчик для выпадающего меню бонусов
        const benefitsDropdown = modalElement.querySelector('.benefits-dropdown');
        if (benefitsDropdown) {
            // Предотвращаем закрытие при клике внутри dropdown
            benefitsDropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }
        
        // Обработчик для ссылки на полную статью
        const fullArticleLink = modalElement.querySelector('.full-article-link');
        if (fullArticleLink) {
            fullArticleLink.addEventListener('click', (event) => {
                event.preventDefault();
                this.navigateToFullArticle(modalId);
            });
        }
    }
    
    // Закрытие модального окна
    closeModal(modalId) {
        const modalElement = document.getElementById(modalId + '-overlay');
        if (!modalElement) return;
        
        // Скрываем модальное окно с анимацией
        modalElement.classList.remove('active');
        
        // После окончания анимации можно удалить элемент
        setTimeout(() => {
            // Восстанавливаем прокрутку основного содержимого
            document.body.style.overflow = this.bodyOriginalStyle;
            
            // Удаляем модальное окно из DOM
            // modalElement.remove(); // Закомментировано для сохранения состояния модального окна
        }, 300);
        
        this.activeModal = null;
        
        // Для отслеживания аналитики
        console.log(`Закрыто модальное окно: ${modalId}`);
    }
    
    // Переключение состояния лайка
    toggleLike(modalId, likeButton) {
        const likeCountElement = likeButton.querySelector('.like-count');
        const isLiked = this.likeStates[modalId] || false;
        const currentLikes = parseInt(likeCountElement.textContent);
        
        if (isLiked) {
            // Убираем лайк
            likeButton.classList.remove('active');
            likeCountElement.textContent = currentLikes - 1;
            this.likeStates[modalId] = false;
        } else {
            // Ставим лайк
            likeButton.classList.add('active');
            likeCountElement.textContent = currentLikes + 1;
            this.likeStates[modalId] = true;
        }
        
        // Сохраняем состояние лайков
        this.saveLikeStates();
        
        // Для отслеживания аналитики
        console.log(`Лайк ${isLiked ? 'убран' : 'поставлен'} для модального окна: ${modalId}`);
    }
    
    // Прокрутка к секции комментариев
    scrollToComments(modalId) {
        const commentsSection = document.querySelector('.comments-section');
        if (commentsSection) {
            commentsSection.scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
            
            // Подсветка секции комментариев
            commentsSection.style.backgroundColor = 'rgba(15, 51, 239, 0.05)';
            setTimeout(() => {
                commentsSection.style.backgroundColor = '#fafafa';
            }, 1000);
        }
        
        // Для отслеживания аналитики
        console.log(`Прокрутка к секции комментариев для модального окна: ${modalId}`);
    }
    
    // Переход к полной статье (заглушка)
    navigateToFullArticle(modalId) {
        alert('Полная версия статьи находится в разработке и будет доступна в ближайшее время.');
        
        // Для отслеживания аналитики
        console.log(`Запрошена полная версия статьи для модального окна: ${modalId}`);
    }
    
    // Показ авторизации ВК для комментариев
    showVKAuthForComments(modalId) {
        // Имитация авторизации ВКонтакте
        const authPrompt = document.querySelector('.vk-auth-prompt');
        const commentsWidget = document.querySelector('.vk-comments-widget');
        
        if (authPrompt && commentsWidget) {
            // Показываем процесс авторизации
            authPrompt.innerHTML = `
                <div class="auth-prompt-content">
                    <div class="auth-prompt-icon">
                        <div class="loading-spinner"></div>
                    </div>
                    <div class="auth-prompt-text">
                        <div class="auth-prompt-title">Авторизация...</div>
                        <div class="auth-prompt-subtitle">Подключаемся к ВКонтакте</div>
                    </div>
                </div>
            `;
            
            // Имитируем процесс авторизации
            setTimeout(() => {
                authPrompt.style.display = 'none';
                commentsWidget.style.display = 'block';
                
                // Инициализируем виджет ВКонтакте (демо)
                this.initVKCommentsWidget(modalId);
                
                // Показываем уведомление об успешной авторизации
                this.showAuthSuccessNotification();
            }, 2000);
        }
    }
    
    // Инициализация виджета ВКонтакте (демо версия)
    initVKCommentsWidget(modalId) {
        const widgetContainer = document.querySelector('.comments-widget-container');
        if (widgetContainer) {
            // В реальной версии здесь был бы настоящий виджет ВК
            widgetContainer.innerHTML = `
                <div class="demo-vk-widget">
                    <div class="demo-comment">
                        <div class="comment-avatar">
                            <img src="images/avatar-user1.png" alt="Пользователь">
                        </div>
                        <div class="comment-content">
                            <div class="comment-author">Иван Петров</div>
                            <div class="comment-text">Отличная статья! Очень полезная информация, спасибо за подробное объяснение 👍</div>
                            <div class="comment-meta">
                                <span class="comment-time">2 часа назад</span>
                                <button class="comment-like">❤️ 12</button>
                                <button class="comment-reply">Ответить</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="demo-comment">
                        <div class="comment-avatar">
                            <img src="images/avatar-user2.png" alt="Пользователь">
                        </div>
                        <div class="comment-content">
                            <div class="comment-author">Мария Сидорова</div>
                            <div class="comment-text">Всё работает как описано! AutoSMM действительно экономит много времени на ведении соцсетей ⚡</div>
                            <div class="comment-meta">
                                <span class="comment-time">4 часа назад</span>
                                <button class="comment-like">❤️ 8</button>
                                <button class="comment-reply">Ответить</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comment-form">
                        <div class="form-avatar">
                            <img src="images/avatar-user3.png" alt="Вы">
                        </div>
                        <div class="form-content">
                            <textarea placeholder="Напишите комментарий..." class="comment-input"></textarea>
                            <div class="form-actions">
                                <div class="form-attachments">
                                    <button class="attach-btn" title="Прикрепить фото">📷</button>
                                    <button class="attach-btn" title="Прикрепить видео">🎥</button>
                                    <button class="attach-btn" title="Прикрепить ссылку">🔗</button>
                                </div>
                                <button class="submit-comment-btn">Опубликовать</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="widget-footer">
                    <div class="vk-branding">
                        <svg viewBox="0 0 24 24" fill="none">
                            <rect width="24" height="24" rx="6" fill="#4C75A3"/>
                            <path d="M12.6 17.4C15.7 17.2 18 14.6 18 11.4C18 7.8 15.2 6 12 6C8.8 6 6 7.8 6 11.4C6 14.6 8.3 17.2 11.4 17.4V13.6H10V12H11.4V10.8C11.4 9.4 12.2 8.8 13.4 8.8C13.8 8.8 14.2 8.8 14.2 8.8V10.2H13.6C13 10.2 12.8 10.6 12.8 10.8V12H14L13.8 13.6H12.6V17.4Z" fill="white"/>
                        </svg>
                        <span>Комментарии ВКонтакте</span>
                    </div>
                    <div class="widget-settings">
                        <button class="settings-btn">⚙️ Настройки</button>
                    </div>
                </div>
            `;
            
            // Добавляем обработчики событий для демо-виджета
            this.setupDemoWidgetEvents(widgetContainer);
        }
    }
    
    // Настройка событий для демо-виджета
    setupDemoWidgetEvents(container) {
        const submitBtn = container.querySelector('.submit-comment-btn');
        const commentInput = container.querySelector('.comment-input');
        
        if (submitBtn && commentInput) {
            submitBtn.addEventListener('click', () => {
                const text = commentInput.value.trim();
                if (text) {
                    this.addDemoComment(container, text);
                    commentInput.value = '';
                }
            });
            
            commentInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.ctrlKey) {
                    submitBtn.click();
                }
            });
        }
    }
    
    // Добавление демо-комментария
    addDemoComment(container, text) {
        const commentsContainer = container.querySelector('.demo-vk-widget');
        const commentForm = container.querySelector('.comment-form');
        
        const newComment = document.createElement('div');
        newComment.className = 'demo-comment new-comment';
        newComment.innerHTML = `
            <div class="comment-avatar">
                <img src="images/avatar-user3.png" alt="Вы">
            </div>
            <div class="comment-content">
                <div class="comment-author">Вы</div>
                <div class="comment-text">${text}</div>
                <div class="comment-meta">
                    <span class="comment-time">только что</span>
                    <button class="comment-like">❤️ 0</button>
                    <button class="comment-reply">Ответить</button>
                </div>
            </div>
        `;
        
        commentsContainer.insertBefore(newComment, commentForm);
        
        // Анимация появления
        setTimeout(() => {
            newComment.classList.add('visible');
        }, 10);
        
        // Показываем уведомление о бонусе
        this.showCommentBonusNotification();
    }
    
    // Уведомление об успешной авторизации
    showAuthSuccessNotification() {
        this.showNotification('✅ Авторизация прошла успешно! Теперь вы можете оставлять комментарии', 'success');
    }
    
    // Уведомление о бонусе за комментарий
    showCommentBonusNotification() {
        this.showNotification('🎁 Комментарий добавлен! Вы участвуете в еженедельном розыгрыше призов', 'bonus');
    }
    
    // Универсальная функция для показа уведомлений
    showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        
        const colors = {
            success: '#4CAF50',
            bonus: '#FF6B35', 
            info: '#2196F3'
        };
        
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${colors[type] || colors.info};
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            z-index: 10001;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            transform: translateX(100%);
            transition: transform 0.4s ease;
            max-width: 350px;
            line-height: 1.4;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 10);
        
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 400);
        }, 4000);
    }
}

// Создаем глобальный экземпляр менеджера модальных окон
window.modalManager = new ModalManager();